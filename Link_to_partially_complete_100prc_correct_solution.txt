https://stackoverflow.com/questions/24834158/deadlock-in-python-single-lane-bridge-implementation